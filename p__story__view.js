(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"+n12":function(t,e,n){"use strict";function a(){let t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return t=t.replace(/x/g,(function(){const t=16*Math.random()|0;return t.toString(16)})),t=t.replace("y",(16*Math.random()&3|8).toString(16)),t.replace(/-/g,"").substr(0,24)}function r(t,e){let n;return function(){n&&clearTimeout(n),n=setTimeout((()=>{t(...arguments)}),e)}}async function i(t){const e=await fetch(`./templates/${t}.json`);return e.json()}n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}))},"0Jvv":function(t,e,n){"use strict";n.r(e);n("+L6B");var a=n("2/Rp"),r=n("tJVT"),i=n("q1tI"),c=n.n(i),o=n("9kvl"),s=n("AKB2"),l=n("AF1r"),u=n("EID/"),d=n("tao+"),m=n("4469");e["default"]=t=>{const e=t.match.params.id,n=Object(i["useState"])(),p=Object(r["a"])(n,2),f=p[0],h=p[1];if(Object(i["useEffect"])((()=>{m["a"](e).then((t=>{t.success&&h(t.data)}))}),[e]),!f)return null;const b=async()=>{o["a"].push(`/story/${e}/editor`)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(d["a"],{title:f.name}),c.a.createElement(s["a"],{data:f}),c.a.createElement(u["a"],null,c.a.createElement(a["a"],{shape:"circle",onClick:b},c.a.createElement(l["a"],{type:"icon-edit"}))))}},"2pc0":function(t,e,n){t.exports={header:"header___1gv_6"}},4469:function(t,e,n){"use strict";n.d(e,"c",(function(){return p})),n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return h})),n.d(e,"e",(function(){return b})),n.d(e,"d",(function(){return g}));var a=n("XS3J"),r=n.n(a),i=n("+n12");const c="marry.db",o=Symbol.for("db-instance-key");class s{loadDatabase(t,e){try{const n=localStorage.getItem(t);e(n)}catch(n){e(n)}}saveDatabase(t,e,n){try{localStorage.setItem(t,e),n(null)}catch(a){n(a)}}}const l=new s;class u{static getInstance(){return window[o]||(window[o]=new u),window[o]}constructor(){this.db=new r.a(c,{env:"BROWSER",autosave:!0,adapter:l}),this.db.loadDatabase()}table(t){return this.collection=this.db.getCollection(t)||this.db.addCollection(t),this}find(t={}){return this.collection.find(t)}findOne(t={}){return this.collection.findOne(t)}insert(t){const e=Object(i["c"])();return this.collection.insert({...t,_id:e}),e}update(t={},e){this.collection.findAndUpdate(t,(t=>{e="function"===typeof e?e(t):e,Object.assign(t,e)}))}delete(t={}){this.collection.findAndRemove(t)}}var d=u.getInstance();const m="story";async function p(t){const e=d.table(m).find(t);return{success:!0,data:e}}async function f(t){const e=d.table(m).findOne({_id:t});return{success:!0,data:e}}async function h(t){const e=d.table(m).insert(t);return{success:!0,data:{_id:e}}}async function b(t,e){return d.table(m).update({_id:t},e),{success:!0}}async function g(t){return d.table(m).delete({_id:t}),{success:!0}}},AF1r:function(t,e,n){"use strict";var a=n("R+Pm");const r=Object(a["a"])({scriptUrl:["//at.alicdn.com/t/font_2652076_5epk3ej1ofs.js","//at.alicdn.com/t/font_2724754_rcmb540ie.js"]});e["a"]=r},AKB2:function(t,e,n){"use strict";var a=n("0Owb"),r=n("tJVT"),i=n("q1tI"),c=n.n(i),o=n("xqva"),s=n("Ndxo"),l=n("zBe7"),u=n("AOPw"),d=n("EgnG"),m=n("AF1r"),p=n("zPdC"),f=n.n(p),h=t=>{const e=t.src,n=(t.autoPlay,Object(i["useRef"])()),a=Object(i["useState"])(!0),o=Object(r["a"])(a,2),s=o[0],l=o[1],u=()=>{n.current.paused?p():h()},p=()=>{l(!1),n.current.volume=0,n.current.play(),Object(d["a"])({targets:n.current,easing:"linear",duration:2e3,volume:1})},h=()=>{l(!0),n.current.volume=1,Object(d["a"])({targets:n.current,easing:"linear",duration:2e3,volume:0,complete:()=>{n.current.pause()}})};return c.a.createElement("div",{className:f.a.container,onClick:u},c.a.createElement(m["a"],{type:"icon-music",className:""+(s?"":"spin")}),c.a.createElement("audio",{ref:n,src:e,loop:!0}))},b=n("SG4H"),g=n("B2N0"),v=n("OI9A"),x=n.n(v);e["a"]=t=>{const e=t.data,n=t.editable,d=t.onEdit,p=Object(i["useState"])(0),f=Object(r["a"])(p,2),v=f[0],y=f[1],O=Object(i["useMemo"])((()=>Object(g["a"])(e)),[e]);return c.a.createElement(c.a.Fragment,null,O.audio&&c.a.createElement(h,O.audio),c.a.createElement(o["a"],{style:{height:"100%"},autoplay:O.transition.autoPlay&&{delay:O.transition.duration||3e3},direction:O.transition.direction,effect:O.transition.effect,onSlideChangeTransitionEnd:t=>y(t.activeIndex)},O.pages.map(((t,e)=>c.a.createElement(s["a"],{key:t.id},c.a.createElement(l["a"],{background:t.background},t.elements&&t.elements.map(((t,r)=>{const i=b["a"][t.type];return c.a.createElement(u["a"],{key:r,entrance:v===e,position:t.position,pageSize:{width:window.innerWidth,height:window.innerHeight},size:t.size,rotation:t.rotation,clip:t.clip,animation:!n&&t.animation},c.a.createElement(i,Object(a["a"])({},t.props,{size:t.size})),n&&d&&c.a.createElement("button",{className:x.a.btn,onClick:()=>d(e,r)},c.a.createElement(m["a"],{type:"icon-edit"})))}))))))))}},AOPw:function(t,e,n){"use strict";var a=n("0Owb"),r=n("Pv/L"),i=n("q1tI"),c=n.n(i),o=n("EgnG"),s=n("B2N0"),l=t=>{const e=t.id,n=t.path,a=t.scale,r=t.size,o=t.viewBox,s=void 0===o?"0 0 1024 1024":o,l=Object(i["useMemo"])((()=>{const t=r[0],e=r[1],n=s.split(" "),i=n[2]/n[3];let c,o;i>t/e?(c=t*a,o=c/i):(o=e*a,c=o*i);const l=(t-c)/2,u=(e-o)/2,d=c/n[2];return`translate(${l}, ${u}) scale(${d})`}),[]);return c.a.createElement("svg",{width:"0",height:"0",viewBox:s,xmlns:"http://www.w3.org/2000/svg",version:"1.1"},c.a.createElement("defs",null,c.a.createElement("clipPath",{id:e,transform:l},c.a.createElement("path",{d:n,"p-id":"2011"}))))},u=n("xDV/"),d=n.n(u);e["a"]=t=>{const e=t.position,n=t.pageSize,u=t.size,m=t.rotation,p=t.clip,f=t.entrance,h=t.animation,b=void 0===h?{}:h,g=t.children,v=Object(i["useRef"])(),x=Object(i["useRef"])(),y=Object(s["d"])(b,{position:e,size:u,rotation:m},n),O=Object(r["a"])(y),w=O[0],E=O.slice(1),j=Object(s["c"])(w);return Object(i["useEffect"])((()=>{E.length&&(f?x.current?(x.current.reverse(),x.current.play()):x.current=Object(o["a"])({targets:v.current,duration:b.duration||1e3,delay:b.delay||0,easing:"easeInOutSine",keyframes:E}):x.current&&(x.current.reverse(),x.current.play()))}),[f]),c.a.createElement("div",{ref:v,className:d.a.container,style:{...j,clipPath:p&&`url(#${p.id})`}},g,p&&c.a.createElement(l,Object(a["a"])({},p,{size:u})))}},B2N0:function(t,e,n){"use strict";n.d(e,"e",(function(){return c})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return d})),n.d(e,"c",(function(){return m}));var a=n("PpiC"),r=n("+n12"),i={cat:"M518.25664 993.28h-0.4096c-49.03936 0-99.67616-6.47168-150.528-19.22048-52.61312-13.19936-92.57984-29.9008-116.84864-41.60512-58.7776-28.2112-111.47264-67.82976-152.35072-114.55488-41.41056-47.31904-71.24992-102.56384-86.30272-159.744a353.46432 353.46432 0 0 1-5.9904-154.5216c9.6256-52.8384 31.1296-104.20224 63.88736-152.73984l1.3312-5.07904c39.3216-150.08768 79.98464-305.27488 182.67136-324.1472l1.20832-0.21504 1.2288-0.12288A182.55872 182.55872 0 0 1 273.69472 20.48c99.7376 0 169.97376 81.6128 194.48832 114.93376h81.408l2.048-2.4576c27.66848-33.44384 92.4672-111.75936 183.296-111.75936h1.47456c107.37664 0 171.61216 185.3952 210.5856 324.84352 1.3312 4.78208 2.70336 9.6768 3.62496 12.82048 64.12288 94.60736 86.3744 189.41952 66.12992 281.87648-35.1232 160.44032-185.92768 255.08864-200.83712 264.09984C803.4304 913.37728 689.152 988.3136 518.67648 993.28l-0.41984 0.01024z",star:"M437.086316 85.423158L321.589895 287.744l-224.471579 49.690947c-16.384 3.610947-31.528421 11.317895-44.193684 22.312421l-6.413474 6.25179-5.928421 7.006316a99.920842 99.920842 0 0 0 2.96421 127.622737l154.138948 176.128-23.228632 234.873263c-1.724632 17.354105 1.131789 34.923789 8.29979 50.822737l3.772631 7.491368 4.688842 7.383579a99.920842 99.920842 0 0 0 123.526737 35.193263l209.057684-94.208 209.111579 94.154105c15.898947 7.168 33.414737 10.078316 50.768842 8.353685l8.29979-1.239579 8.461474-2.048a99.920842 99.920842 0 0 0 72.757894-105.903158l-23.390315-234.873263 154.246736-176.128c11.048421-12.611368 18.701474-27.809684 22.312421-44.193685l1.455158-8.245894 0.646737-8.677053c1.778526-48.882526-30.666105-91.621053-77.985684-102.076632L725.962105 287.797895l-115.388631-202.320842a99.813053 99.813053 0 0 0-173.433263 0z",leaf:"M946.618 826.575c60.125-157.837 21.743-390.212-60.125-488.534-285.605-315.665-533.628-52.612-533.628-52.612-180.381-120.255-269.178-77.878-312.514-30.062-26.723 37.581 11.876 90.19 11.876 90.19 48.849 54.492 99.584-31.943 255.538 37.581-75.161 511.082 638.852 443.431 638.852 443.431z"};e["a"]=(t,e={width:window.innerWidth,height:window.innerHeight})=>({...t,transition:t.transition||{direction:"vertical",effect:"slide"},pages:c(t.pages,e)});const c=(t,e)=>t?t.map((t=>o(t,e))):[],o=(t,e)=>({...t,id:Object(r["c"])(),elements:t.elements.map((t=>s(t,e)))}),s=(t,e)=>({...t,position:[u(t.position[0],e.width),u(t.position[1],e.height)],size:[u(t.size[0],e.width),u(t.size[1],e.height)],clip:l(t.clip)}),l=t=>{if(t)return"string"===typeof t?i[t]&&{id:Object(r["c"])(),path:i[t]}:{...t,id:Object(r["c"])(),path:i[t.path]||t.path}},u=(t,e)=>t&&"number"!==typeof t?/px$/.test(t)?parseFloat(t):(/%$/.test(t),e*parseFloat(t)/100):t,d=(t,e,n)=>{t=t||{};const a=e.position,r=e.size,i=e.rotation,c=u(r[0],n.width),o=u(r[1],n.height),s={slideInLeft:{translateX:-c,translateY:a[1]},slideInTop:{translateX:a[0],translateY:-o},slideInRight:{translateX:n.width+c,translateY:a[1]},slideInBottom:{translateX:a[0],translateY:n.height+o},slideInLeftTop:{translateX:-c,translateY:-o},slideInRightTop:{translateX:n.width+c,translateY:-o},slideInLeftBottom:{translateX:-c,translateY:n.height+o},slideInRightBottom:{translateX:n.width+c,translateY:n.height+o}};let l=[];return s[t.type]?l.push({...s[t.type],width:r[0],height:r[1]}):t.keyframes&&l.push(...t.keyframes),l.push({translateX:a[0],translateY:a[1],rotate:i,width:r[0],height:r[1]}),l},m=t=>{if(!t)return;const e=t.translateX,n=void 0===e?0:e,r=t.translateY,i=void 0===r?0:r,c=t.rotate,o=void 0===c?0:c,s=Object(a["a"])(t,["translateX","translateY","rotate"]);return{...s,transform:`translateX(${n}px) translateY(${i}px) rotate(${o}deg)`}}},DYRE:function(t,e,n){"use strict";n("cIOH"),n("OPEp")},E6o7:function(t,e,n){t.exports={container:"container___39CpX"}},"EID/":function(t,e,n){"use strict";n("DYRE");var a=n("zeV3"),r=n("q1tI"),i=n.n(r),c=n("a7FC"),o=n.n(c);e["a"]=t=>i.a.createElement(a["b"],{className:o.a.tool,direction:"vertical"},t.children)},OI9A:function(t,e,n){t.exports={btn:"btn___17Bbr"}},OPEp:function(t,e,n){},P80f:function(t,e,n){"use strict";var a=n("ODXe"),r=n("q1tI"),i=n("R3zJ");e["a"]=function(){var t=r["useState"](!1),e=Object(a["a"])(t,2),n=e[0],c=e[1];return r["useEffect"]((function(){c(Object(i["a"])())}),[]),n}},R3zJ:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return o}));var a,r=n("MNnm"),i=function(){return Object(r["a"])()&&window.document.documentElement},c=function(t){if(i()){var e=Array.isArray(t)?t:[t],n=window.document.documentElement;return e.some((function(t){return t in n.style}))}return!1},o=function(){if(!i())return!1;if(void 0!==a)return a;var t=document.createElement("div");return t.style.display="flex",t.style.flexDirection="column",t.style.rowGap="1px",t.appendChild(document.createElement("div")),t.appendChild(document.createElement("div")),document.body.appendChild(t),a=1===t.scrollHeight,document.body.removeChild(t),a}},SG4H:function(t,e,n){"use strict";var a=n("q1tI"),r=n.n(a),i=n("o3J1"),c=n.n(i),o=t=>{const e=t.src,n=t.size,i=t.crop,o=Object(a["useMemo"])((()=>{if(i){const t=i.areaPixel.width/i.area.width*100,e=i.areaPixel.height/i.area.height*100,a=Math.max(n[0]/i.areaPixel.width,n[1]/i.areaPixel.height);return{width:t*a/i.zoom,height:e*a/i.zoom,transform:`\n          translate(-50%, -50%)\n          scale(${i.zoom})\n          translate(${50-i.area.x}%, ${50-i.area.y}%)\n          rotate(${i.rotation}deg)\n        `}}}),[i]);return r.a.createElement("img",{className:c.a.image,style:o,src:e,alt:"img"})},s=n("Y7CS"),l=n.n(s),u=t=>{const e=t.value;return r.a.createElement("div",{className:l.a.container},e)},d=n("uQII");e["a"]={image:o,text:u,icon:d["b"]}},Y7CS:function(t,e,n){t.exports={container:"container___36LYG"}},a7FC:function(t,e,n){t.exports={tool:"tool___DFddu"}},o3J1:function(t,e,n){t.exports={image:"image___dicno"}},"tao+":function(t,e,n){"use strict";n("h7lp");var a=n("bf48"),r=n("0Owb"),i=n("q1tI"),c=n.n(i),o=n("9kvl"),s=n("2pc0"),l=n.n(s);e["a"]=t=>{const e=()=>{o["a"].goBack()};return c.a.createElement(a["a"],Object(r["a"])({className:l.a.header,onBack:e},t))}},uQII:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n("q1tI"),r=n.n(a),i=n("R+Pm"),c=n("E6o7"),o=n.n(c);const s=Object(i["a"])({scriptUrl:["//at.alicdn.com/t/font_2724754_rcmb540ie.js"]});e["b"]=t=>{const e=t.type,n=t.size;return r.a.createElement("div",{className:o.a.container},r.a.createElement(s,{type:`icon-${e}`,style:{fontSize:Math.min(n[0],n[1])}}))}},"xDV/":function(t,e,n){t.exports={container:"container___2Wfau"}},yerw:function(t,e,n){t.exports={container:"container___2CKxV"}},zBe7:function(t,e,n){"use strict";var a=n("q1tI"),r=n.n(a),i=n("yerw"),c=n.n(i);e["a"]=t=>{const e=t.background,n=t.children;return r.a.createElement("div",{className:c.a.container,style:{background:e}},n)}},zPdC:function(t,e,n){t.exports={container:"container___3l3x7",spin:"spin___3DLuw"}},zeV3:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var a=n("wx14"),r=n("rePB"),i=n("ODXe"),c=n("q1tI"),o=n("TSYQ"),s=n.n(o),l=n("Zm9Q"),u=n("H84U");function d(t){var e=t.className,n=t.direction,i=t.index,o=t.marginDirection,s=t.children,l=t.split,u=t.wrap,d=c["useContext"](f),m=d.horizontalSize,p=d.verticalSize,h=d.latestIndex,b=d.supportFlexGap,g={};return b||("vertical"===n?i<h&&(g={marginBottom:m/(l?2:1)}):g=Object(a["a"])(Object(a["a"])({},i<h&&Object(r["a"])({},o,m/(l?2:1))),u&&{paddingBottom:p})),null===s||void 0===s?null:c["createElement"](c["Fragment"],null,c["createElement"]("div",{className:e,style:g},s),i<h&&l&&c["createElement"]("span",{className:"".concat(e,"-split"),style:g},l))}var m=n("P80f"),p=function(t,e){var n={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(t);r<a.length;r++)e.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(n[a[r]]=t[a[r]])}return n},f=c["createContext"]({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),h={small:8,middle:16,large:24};function b(t){return"string"===typeof t?h[t]:t||0}var g=function(t){var e,n=c["useContext"](u["b"]),o=n.getPrefixCls,h=n.space,g=n.direction,v=t.size,x=void 0===v?(null===h||void 0===h?void 0:h.size)||"small":v,y=t.align,O=t.className,w=t.children,E=t.direction,j=void 0===E?"horizontal":E,z=t.prefixCls,_=t.split,I=t.style,S=t.wrap,C=void 0!==S&&S,P=p(t,["size","align","className","children","direction","prefixCls","split","style","wrap"]),k=Object(m["a"])(),N=c["useMemo"]((function(){return(Array.isArray(x)?x:[x,x]).map((function(t){return b(t)}))}),[x]),B=Object(i["a"])(N,2),Y=B[0],R=B[1],A=Object(l["a"])(w,{keepEmpty:!0}),D=void 0===y&&"horizontal"===j?"center":y,X=o("space",z),$=s()(X,"".concat(X,"-").concat(j),(e={},Object(r["a"])(e,"".concat(X,"-rtl"),"rtl"===g),Object(r["a"])(e,"".concat(X,"-align-").concat(D),D),e),O),F="".concat(X,"-item"),M="rtl"===g?"marginLeft":"marginRight",q=0,G=A.map((function(t,e){return null!==t&&void 0!==t&&(q=e),c["createElement"](d,{className:F,key:"".concat(F,"-").concat(e),direction:j,index:e,marginDirection:M,split:_,wrap:C},t)})),J=c["useMemo"]((function(){return{horizontalSize:Y,verticalSize:R,latestIndex:q,supportFlexGap:k}}),[Y,R,q,k]);if(0===A.length)return null;var L={};return C&&(L.flexWrap="wrap",k||(L.marginBottom=-R)),k&&(L.columnGap=Y,L.rowGap=R),c["createElement"]("div",Object(a["a"])({className:$,style:Object(a["a"])(Object(a["a"])({},L),I)},P),c["createElement"](f.Provider,{value:J},G))};e["b"]=g}}]);