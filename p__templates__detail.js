(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"+n12":function(e,t,n){"use strict";function a(){let e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return e=e.replace(/x/g,(function(){const e=16*Math.random()|0;return e.toString(16)})),e=e.replace("y",(16*Math.random()&3|8).toString(16)),e.replace(/-/g,"").substr(0,24)}function r(e,t){let n;return function(){n&&clearTimeout(n),n=setTimeout((()=>{e(...arguments)}),t)}}async function c(e){const t=await fetch(`./templates/${e}.json`);return t.json()}n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}))},"2pc0":function(e,t,n){e.exports={header:"header___1gv_6"}},"42hf":function(e,t,n){e.exports={fill:"fill___3WFpF",bookCover:"bookCover___2DsAc",paper:"paper___2EG8l",book:"book___rQ9Ix",cover:"cover___1ECPG"}},4469:function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"e",(function(){return g})),n.d(t,"d",(function(){return b}));var a=n("XS3J"),r=n.n(a),c=n("+n12");const i="marry.db",s=Symbol.for("db-instance-key");class o{loadDatabase(e,t){try{const n=localStorage.getItem(e);t(n)}catch(n){t(n)}}saveDatabase(e,t,n){try{localStorage.setItem(e,t),n(null)}catch(a){n(a)}}}const l=new o;class d{static getInstance(){return window[s]||(window[s]=new d),window[s]}constructor(){this.db=new r.a(i,{env:"BROWSER",autosave:!0,adapter:l}),this.db.loadDatabase()}table(e){return this.collection=this.db.getCollection(e)||this.db.addCollection(e),this}find(e={}){return this.collection.find(e)}findOne(e={}){return this.collection.findOne(e)}insert(e){const t=Object(c["c"])();return this.collection.insert({...e,_id:t}),t}update(e={},t){this.collection.findAndUpdate(e,(e=>{t="function"===typeof t?t(e):t,Object.assign(e,t)}))}delete(e={}){this.collection.findAndRemove(e)}}var u=d.getInstance();const m="story";async function p(e){const t=u.table(m).find(e);return{success:!0,data:t}}async function f(e){const t=u.table(m).findOne({_id:e});return{success:!0,data:t}}async function h(e){const t=u.table(m).insert(e);return{success:!0,data:{_id:t}}}async function g(e,t){return u.table(m).update({_id:e},t),{success:!0}}async function b(e){return u.table(m).delete({_id:e}),{success:!0}}},AF1r:function(e,t,n){"use strict";var a=n("R+Pm");const r=Object(a["a"])({scriptUrl:["//at.alicdn.com/t/font_2652076_5epk3ej1ofs.js","//at.alicdn.com/t/font_2724754_rcmb540ie.js"]});t["a"]=r},AOPw:function(e,t,n){"use strict";var a=n("0Owb"),r=n("Pv/L"),c=n("q1tI"),i=n.n(c),s=n("EgnG"),o=n("B2N0"),l=e=>{const t=e.id,n=e.path,a=e.scale,r=e.size,s=e.viewBox,o=void 0===s?"0 0 1024 1024":s,l=Object(c["useMemo"])((()=>{const e=r[0],t=r[1],n=o.split(" "),c=n[2]/n[3];let i,s;c>e/t?(i=e*a,s=i/c):(s=t*a,i=s*c);const l=(e-i)/2,d=(t-s)/2,u=i/n[2];return`translate(${l}, ${d}) scale(${u})`}),[]);return i.a.createElement("svg",{width:"0",height:"0",viewBox:o,xmlns:"http://www.w3.org/2000/svg",version:"1.1"},i.a.createElement("defs",null,i.a.createElement("clipPath",{id:t,transform:l},i.a.createElement("path",{d:n,"p-id":"2011"}))))},d=n("xDV/"),u=n.n(d);t["a"]=e=>{const t=e.position,n=e.size,d=e.rotation,m=e.clip,p=e.entrance,f=e.animation,h=void 0===f?{}:f,g=e.children,b=Object(c["useRef"])(),_=Object(c["useRef"])(),w=Object(o["d"])(h,{position:t,size:n,rotation:d}),v=Object(r["a"])(w),x=v[0],E=v.slice(1),y=Object(o["c"])(x);return Object(c["useEffect"])((()=>{E.length&&(p?_.current?(_.current.reverse(),_.current.play()):_.current=Object(s["a"])({targets:b.current,duration:h.duration||1e3,delay:h.delay||0,easing:"easeInOutSine",keyframes:E}):_.current&&(_.current.reverse(),_.current.play()))}),[p]),i.a.createElement("div",{ref:b,className:u.a.container,style:{...y,clipPath:m&&`url(#${m.id})`}},g,m&&i.a.createElement(l,Object(a["a"])({},m,{size:n})))}},B2N0:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return u}));var a=n("PpiC"),r=n("+n12"),c={cat:"M518.25664 993.28h-0.4096c-49.03936 0-99.67616-6.47168-150.528-19.22048-52.61312-13.19936-92.57984-29.9008-116.84864-41.60512-58.7776-28.2112-111.47264-67.82976-152.35072-114.55488-41.41056-47.31904-71.24992-102.56384-86.30272-159.744a353.46432 353.46432 0 0 1-5.9904-154.5216c9.6256-52.8384 31.1296-104.20224 63.88736-152.73984l1.3312-5.07904c39.3216-150.08768 79.98464-305.27488 182.67136-324.1472l1.20832-0.21504 1.2288-0.12288A182.55872 182.55872 0 0 1 273.69472 20.48c99.7376 0 169.97376 81.6128 194.48832 114.93376h81.408l2.048-2.4576c27.66848-33.44384 92.4672-111.75936 183.296-111.75936h1.47456c107.37664 0 171.61216 185.3952 210.5856 324.84352 1.3312 4.78208 2.70336 9.6768 3.62496 12.82048 64.12288 94.60736 86.3744 189.41952 66.12992 281.87648-35.1232 160.44032-185.92768 255.08864-200.83712 264.09984C803.4304 913.37728 689.152 988.3136 518.67648 993.28l-0.41984 0.01024z",star:"M437.086316 85.423158L321.589895 287.744l-224.471579 49.690947c-16.384 3.610947-31.528421 11.317895-44.193684 22.312421l-6.413474 6.25179-5.928421 7.006316a99.920842 99.920842 0 0 0 2.96421 127.622737l154.138948 176.128-23.228632 234.873263c-1.724632 17.354105 1.131789 34.923789 8.29979 50.822737l3.772631 7.491368 4.688842 7.383579a99.920842 99.920842 0 0 0 123.526737 35.193263l209.057684-94.208 209.111579 94.154105c15.898947 7.168 33.414737 10.078316 50.768842 8.353685l8.29979-1.239579 8.461474-2.048a99.920842 99.920842 0 0 0 72.757894-105.903158l-23.390315-234.873263 154.246736-176.128c11.048421-12.611368 18.701474-27.809684 22.312421-44.193685l1.455158-8.245894 0.646737-8.677053c1.778526-48.882526-30.666105-91.621053-77.985684-102.076632L725.962105 287.797895l-115.388631-202.320842a99.813053 99.813053 0 0 0-173.433263 0z",leaf:"M946.618 826.575c60.125-157.837 21.743-390.212-60.125-488.534-285.605-315.665-533.628-52.612-533.628-52.612-180.381-120.255-269.178-77.878-312.514-30.062-26.723 37.581 11.876 90.19 11.876 90.19 48.849 54.492 99.584-31.943 255.538 37.581-75.161 511.082 638.852 443.431 638.852 443.431z"};t["a"]=e=>({...e,transition:e.transition||{direction:"vertical",effect:"slide"},pages:e.pages.map(i)});const i=e=>({...e,id:Object(r["c"])(),elements:e.elements.map(s)}),s=e=>({...e,position:[l(e.position[0],window.innerWidth),l(e.position[1],window.innerHeight)],size:[l(e.size[0],window.innerWidth),l(e.size[1],window.innerHeight)],clip:o(e.clip)}),o=e=>{if(e)return"string"===typeof e?c[e]&&{id:Object(r["c"])(),path:c[e]}:{...e,id:Object(r["c"])(),path:c[e.path]||e.path}},l=(e,t)=>e&&"number"!==typeof e?/px$/.test(e)?parseFloat(e):(/%$/.test(e),t*parseFloat(e)/100):e,d=(e,t)=>{e=e||{};const n=t.position,a=t.size,r=t.rotation,c=l(a[0],window.innerWidth),i=l(a[1],window.innerHeight),s={slideInLeft:{translateX:-c,translateY:n[1]},slideInTop:{translateX:n[0],translateY:-i},slideInRight:{translateX:window.innerWidth+c,translateY:n[1]},slideInBottom:{translateX:n[0],translateY:window.innerHeight+i},slideInLeftTop:{translateX:-c,translateY:-i},slideInRightTop:{translateX:window.innerWidth+c,translateY:-i},slideInLeftBottom:{translateX:-c,translateY:window.innerHeight+i},slideInRightBottom:{translateX:window.innerWidth+c,translateY:window.innerHeight+i}};let o=[];return s[e.type]?o.push({...s[e.type],width:a[0],height:a[1]}):e.keyframes&&o.push(...e.keyframes),o.push({translateX:n[0],translateY:n[1],rotate:r,width:a[0],height:a[1]}),o},u=e=>{if(!e)return;const t=e.translateX,n=void 0===t?0:t,r=e.translateY,c=void 0===r?0:r,i=e.rotate,s=void 0===i?0:i,o=Object(a["a"])(e,["translateX","translateY","rotate"]);return{...o,transform:`translateX(${n}px) translateY(${c}px) rotate(${s}deg)`}}},C3jO:function(e,t,n){e.exports={container:"container___VZCKj",back:"back___2TiKn",content:"content___D08Zk"}},E6o7:function(e,t,n){e.exports={container:"container___39CpX"}},HLoj:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),c=n("C3jO"),i=n.n(c),s=e=>{const t=e.aspect,n=void 0===t?.618:t,a=e.width,c=e.children;return r.a.createElement("div",{className:i.a.container,style:{width:a}},r.a.createElement("div",{className:i.a.back,style:{paddingBottom:100*n+"%"}}),r.a.createElement("div",{className:i.a.content},c))},o=n("42hf"),l=n.n(o);const d='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="1080" height="1490"><rect fill-opacity="0"/></svg>';t["a"]=e=>{const t=e.cover,n=e.width,a=e.onClick;return r.a.createElement(s,{aspect:1.414,width:n},r.a.createElement("div",{className:l.a.bookCover,onClick:a},r.a.createElement("div",{className:l.a.paper}),r.a.createElement("div",{className:l.a.book},r.a.createElement("div",{className:l.a.cover},r.a.createElement("img",{src:d,style:{backgroundImage:`url(${t})`}}),r.a.createElement("div",{className:l.a.paper})),r.a.createElement("img",{src:d,className:l.a.corner,style:{backgroundImage:`url(${t})`}}))))}},SG4H:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),c=n("o3J1"),i=n.n(c),s=e=>{const t=e.src,n=e.size,c=e.crop,s=Object(a["useMemo"])((()=>{if(c){const e=c.areaPixel.width/c.area.width*100,t=c.areaPixel.height/c.area.height*100,a=Math.max(n[0]/c.areaPixel.width,n[1]/c.areaPixel.height);return{width:e*a/c.zoom,height:t*a/c.zoom,transform:`\n          translate(-50%, -50%)\n          scale(${c.zoom})\n          translate(${50-c.area.x}%, ${50-c.area.y}%)\n          rotate(${c.rotation}deg)\n        `}}}),[c]);return r.a.createElement("img",{className:i.a.image,style:s,src:t,alt:"img"})},o=n("Y7CS"),l=n.n(o),d=e=>{const t=e.value;return r.a.createElement("div",{className:l.a.container},t)},u=n("uQII");t["a"]={image:s,text:d,icon:u["b"]}},SZAn:function(e,t,n){"use strict";n.r(t);n("DYRE");var a=n("zeV3"),r=(n("+L6B"),n("2/Rp")),c=(n("tU7J"),n("wFql")),i=n("tJVT"),s=n("q1tI"),o=n.n(s),l=n("9kvl"),d=n("AF1r"),u=n("HLoj"),m=(n("h7lp"),n("bf48")),p=n("0Owb"),f=n("2pc0"),h=n.n(f),g=e=>{const t=()=>{l["a"].goBack()};return o.a.createElement(m["a"],Object(p["a"])({className:h.a.header,onBack:t},e))},b=n("AOPw"),_=n("SG4H"),w=n("irUb"),v=n.n(w),x=e=>{const t=e.pages,n=void 0===t?[]:t;return o.a.createElement("div",{className:v.a.gallery},n.map(((e,t)=>o.a.createElement("div",{key:e.id,className:v.a.galleryPage},e.elements&&e.elements.map(((e,t)=>{const n=_["a"][e.type];return o.a.createElement(b["a"],{key:t,position:e.position,size:e.size,rotation:e.rotation,clip:e.clip,animation:!1},o.a.createElement(n,Object(p["a"])({},e.props,{size:e.size})))}))))))},E=n("+n12"),y=n("4469"),O=n("URR8"),j=n.n(O);t["default"]=e=>{const t=e.match.params.id,n=Object(s["useState"])(l["a"].location.state),m=Object(i["a"])(n,2),p=m[0],f=m[1];if(Object(s["useEffect"])((()=>{Object(E["b"])(t).then((e=>{f(e)}))}),[t]),!p)return null;const h=()=>{l["a"].push(`/templates/${t}/view`)},b=async()=>{const e=await y["b"](p);e.success&&l["a"].push(`/editor/${e.data._id}`)};return o.a.createElement("div",null,o.a.createElement(g,{title:p.name}),o.a.createElement("div",{className:j.a.banner},o.a.createElement("img",{className:j.a.bg,src:p.cover}),o.a.createElement("div",{className:j.a.content},o.a.createElement("div",{className:j.a.pic},o.a.createElement(u["a"],{cover:p.cover})),o.a.createElement("div",{className:j.a.info},o.a.createElement(c["a"].Title,{level:5},p.name),o.a.createElement(c["a"].Paragraph,{ellipsis:{rows:4}},p.description),o.a.createElement(a["b"],{style:{float:"right"}},o.a.createElement(r["a"],{shape:"circle",onClick:h},o.a.createElement(d["a"],{type:"icon-view"})),o.a.createElement(r["a"],{shape:"circle",onClick:b},o.a.createElement(d["a"],{type:"icon-edit"})))))),o.a.createElement("div",null,o.a.createElement(x,{pages:p.pages})))}},URR8:function(e,t,n){e.exports={banner:"banner___OFjvZ",bg:"bg___20c85",content:"content___2rJiA",pic:"pic___KedZ3",info:"info___VOHyK"}},Y7CS:function(e,t,n){e.exports={container:"container___36LYG"}},irUb:function(e,t,n){e.exports={gallery:"gallery___1Bf0W",galleryPage:"galleryPage___1rroe"}},o3J1:function(e,t,n){e.exports={image:"image___dicno"}},uQII:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("q1tI"),r=n.n(a),c=n("R+Pm"),i=n("E6o7"),s=n.n(i);const o=Object(c["a"])({scriptUrl:["//at.alicdn.com/t/font_2724754_rcmb540ie.js"]});t["b"]=e=>{const t=e.type,n=e.size;return r.a.createElement("div",{className:s.a.container},r.a.createElement(o,{type:`icon-${t}`,style:{fontSize:Math.min(n[0],n[1])}}))}},"xDV/":function(e,t,n){e.exports={container:"container___2Wfau"}}}]);